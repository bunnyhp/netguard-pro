{"fsPath":"\\home\\jarvis\\NetGuard\\scripts\\ai_5min_aggregator.py","fileUuid":"60dd118f-566e-412a-8761-dd1c3d479f09","fileSizeBytes":32813,"numLines":809,"diffChanges":[{"originalStartLineNumberOneIndexed":582,"originalEndLineNumberExclusiveOneIndexed":582,"modifiedStartLineNumberOneIndexed":582,"modifiedEndLineNumberExclusiveOneIndexed":617,"addedLines":["def call_groq_api(prompt, api_key):","    \"\"\"Call Groq API as backup\"\"\"","    try:","        url = \"https://api.groq.com/openai/v1/chat/completions\"","        headers = {","            'Authorization': f'Bearer {api_key}',","            'Content-Type': 'application/json'","        }","        ","        payload = {","            \"model\": \"llama-3.3-70b-versatile\",","            \"messages\": [{\"role\": \"user\", \"content\": prompt}],","            \"temperature\": 0.3,","            \"max_tokens\": 4096","        }","        ","        response = requests.post(url, headers=headers, json=payload, timeout=60)","        ","        if response.status_code == 200:","            result = response.json()","            text = result['choices'][0]['message']['content']","            # Extract JSON from markdown code blocks if present","            if '```json' in text:","                text = text.split('```json')[1].split('```')[0].strip()","            elif '```' in text:","                text = text.split('```')[1].split('```')[0].strip()","            return json.loads(text)","        else:","            logging.error(f\"Groq API error: {response.status_code} - {response.text}\")","            return None","            ","    except Exception as e:","        logging.error(f\"Error calling Groq API: {e}\")","        return None",""],"tokenizedAddedLines":[1000544,1000545,31,1000546,1000547,1000548,1000549,58,53,417,1000550,1000551,1000552,1000553,58,53,1000554,53,432,433,1000555,435,436,437,438,439,440,172,1000556,442,67,34,1000557,36,6]},{"originalStartLineNumberOneIndexed":691,"originalEndLineNumberExclusiveOneIndexed":694,"modifiedStartLineNumberOneIndexed":726,"modifiedEndLineNumberExclusiveOneIndexed":731,"addedLines":["    gemini_key = config.get('api_keys', {}).get('gemini_api_key')","    groq_key = config.get('api_keys', {}).get('groq_api_key')","    ","    if not gemini_key and not groq_key:","        logging.error(\"No API keys found in configuration\")"],"tokenizedAddedLines":[1000558,1000559,300,1000560,1000561]},{"originalStartLineNumberOneIndexed":727,"originalEndLineNumberExclusiveOneIndexed":728,"modifiedStartLineNumberOneIndexed":764,"modifiedEndLineNumberExclusiveOneIndexed":768,"addedLines":["            # 3. Call AI API (try Gemini first, then Groq as fallback)","            analysis = None","            ","            if gemini_key:"],"tokenizedAddedLines":[1000562,1000563,67,1000564]},{"originalStartLineNumberOneIndexed":729,"originalEndLineNumberExclusiveOneIndexed":730,"modifiedStartLineNumberOneIndexed":769,"modifiedEndLineNumberExclusiveOneIndexed":777,"addedLines":["                analysis = call_gemini_api(prompt, gemini_key)","                ","                if not analysis and groq_key:","                    logging.warning(\"Gemini API failed, trying Groq API...\")","                    analysis = call_groq_api(prompt, groq_key)","            elif groq_key:","                logging.info(\"Step 3: Sending data to Groq AI for analysis...\")","                analysis = call_groq_api(prompt, groq_key)"],"tokenizedAddedLines":[1000565,73,1000566,1000567,1000568,1000569,1000570,1000571]}],"gitInfo":{"noRepoFound":true},"kind":"KIND_MODIFIED"}