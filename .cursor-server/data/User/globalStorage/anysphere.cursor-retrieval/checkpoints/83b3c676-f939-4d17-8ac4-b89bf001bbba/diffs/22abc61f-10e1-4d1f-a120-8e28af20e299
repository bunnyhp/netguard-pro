{"fsPath":"\\home\\jarvis\\NetGuard\\fix_all_collectors.sh","fileUuid":"22abc61f-10e1-4d1f-a120-8e28af20e299","fileSizeBytes":3557,"numLines":137,"diffChanges":[{"originalStartLineNumberOneIndexed":1,"originalEndLineNumberExclusiveOneIndexed":1,"modifiedStartLineNumberOneIndexed":1,"modifiedEndLineNumberExclusiveOneIndexed":138,"addedLines":["#!/bin/bash","","echo \"==========================================\"","echo \"  NetGuard Pro - Collector Diagnostics & Fix\"","echo \"==========================================\"","echo \"\"","","# Ensure log directories exist","echo \"→ Creating log directories...\"","sudo mkdir -p /home/jarvis/NetGuard/logs/system","sudo mkdir -p /home/jarvis/NetGuard/logs/data","sudo chown -R jarvis:jarvis /home/jarvis/NetGuard/logs","sudo chmod -R 755 /home/jarvis/NetGuard/logs","echo \"  ✓ Log directories ready\"","echo \"\"","","# Ensure scripts are executable","echo \"→ Making collector scripts executable...\"","sudo chmod +x /home/jarvis/NetGuard/scripts/*_collector.py","echo \"  ✓ Scripts are executable\"","echo \"\"","","# Check if required tools are installed","echo \"→ Checking required network tools...\"","TOOLS=(\"p0f\" \"ngrep\" \"httpry\" \"netsniff-ng\" \"nethogs\" \"argus\" \"iftop\")","MISSING=()","","for tool in \"${TOOLS[@]}\"; do","    if command -v $tool &> /dev/null; then","        echo \"  ✓ $tool: installed\"","    else","        echo \"  ✗ $tool: NOT installed\"","        MISSING+=($tool)","    fi","done","","if [ ${#MISSING[@]} -gt 0 ]; then","    echo \"\"","    echo \"⚠ Missing tools detected. Installing...\"","    sudo apt-get update -qq","    for tool in \"${MISSING[@]}\"; do","        echo \"  → Installing $tool...\"","        case $tool in","            \"netsniff-ng\")","                sudo apt-get install -y netsniff-ng","                ;;","            \"argus\")","                sudo apt-get install -y argus-client argus-server","                ;;","            *)","                sudo apt-get install -y $tool","                ;;","        esac","    done","fi","","echo \"\"","echo \"→ Installing systemd service files...\"","sudo cp /home/jarvis/NetGuard/services/*-collector.service /etc/systemd/system/","sudo systemctl daemon-reload","echo \"  ✓ Services installed\"","","echo \"\"","echo \"→ Starting all collector services...\"","echo \"\"","","SERVICES=(","    \"p0f-collector\"","    \"tshark-collector\"","    \"tcpdump-collector\"","    \"ngrep-collector\"","    \"httpry-collector\"","    \"argus-collector\"","    \"netsniff-collector\"","    \"iftop-collector\"","    \"nethogs-collector\"","    \"suricata-collector\"",")","","for service in \"${SERVICES[@]}\"; do","    echo \"  Starting $service...\"","    sudo systemctl enable $service 2>/dev/null","    sudo systemctl restart $service","    sleep 2","    ","    if systemctl is-active --quiet $service; then","        echo \"    ✓ $service is RUNNING\"","    else","        echo \"    ✗ $service FAILED\"","        echo \"    Last 5 log lines:\"","        sudo journalctl -u $service -n 5 --no-pager | sed 's/^/      /'","    fi","    echo \"\"","done","","echo \"==========================================\"","echo \"  Collector Status\"","echo \"==========================================\"","echo \"\"","","RUNNING=0","STOPPED=0","TOTAL=${#SERVICES[@]}","","for service in \"${SERVICES[@]}\"; do","    if systemctl is-active --quiet $service; then","        echo \"✓ $service\"","        ((RUNNING++))","    else","        echo \"✗ $service\"","        ((STOPPED++))","    fi","done","","echo \"\"","echo \"==========================================\"","echo \"Summary: $RUNNING/$TOTAL services running\"","echo \"==========================================\"","echo \"\"","","# Check if data is being collected","echo \"→ Checking database for recent data...\"","sleep 5","","if sqlite3 /home/jarvis/NetGuard/network.db \"SELECT name FROM sqlite_master WHERE type='table' AND name LIKE '%_2025%' LIMIT 5\" | head -5; then","    echo \"\"","    echo \"✓ Data collection is working!\"","else","    echo \"\"","    echo \"⚠ No recent data tables found. Collectors may need more time.\"","fi","","echo \"\"","echo \"To view logs: sudo journalctl -u <service-name> -f\"","echo \"To restart a service: sudo systemctl restart <service-name>\"","",""],"tokenizedAddedLines":[1000000,1000001,1000002,1000003,1000002,1000004,1000001,1000005,1000006,1000007,1000008,1000009,1000010,1000011,1000004,1000001,1000012,1000013,1000014,1000015,1000004,1000001,1000016,1000017,1000018,1000019,1000001,1000020,1000021,1000022,1000023,1000024,1000025,1000026,1000027,1000001,1000028,1000029,1000030,1000031,1000032,1000033,1000034,1000035,1000036,1000037,1000038,1000039,1000037,1000040,1000041,1000037,1000042,1000043,1000044,1000001,1000004,1000045,1000046,1000047,1000048,1000001,1000004,1000049,1000004,1000001,1000050,1000051,1000052,1000053,1000054,1000055,1000056,1000057,1000058,1000059,1000060,1000061,1000001,1000062,1000063,1000064,1000065,1000066,1000067,1000068,1000069,1000023,1000070,1000071,1000072,1000026,1000029,1000027,1000001,1000002,1000073,1000002,1000004,1000001,1000074,1000075,1000076,1000001,1000062,1000068,1000077,1000078,1000023,1000079,1000080,1000026,1000027,1000001,1000004,1000002,1000081,1000002,1000004,1000001,1000082,1000083,1000084,1000001,1000085,1000029,1000086,1000087,1000029,1000088,1000044,1000001,1000004,1000089,1000090,1000001,1000001]}],"gitInfo":{"noRepoFound":true},"kind":"KIND_ADDED"}