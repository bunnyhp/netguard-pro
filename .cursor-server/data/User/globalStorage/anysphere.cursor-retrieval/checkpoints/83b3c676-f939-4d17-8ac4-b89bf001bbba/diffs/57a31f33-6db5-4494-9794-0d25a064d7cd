{"fsPath":"\\home\\jarvis\\NetGuard\\verify_collectors.sh","fileUuid":"57a31f33-6db5-4494-9794-0d25a064d7cd","fileSizeBytes":2404,"numLines":81,"diffChanges":[{"originalStartLineNumberOneIndexed":1,"originalEndLineNumberExclusiveOneIndexed":1,"modifiedStartLineNumberOneIndexed":1,"modifiedEndLineNumberExclusiveOneIndexed":82,"addedLines":["#!/bin/bash","","echo \"==========================================\"","echo \"  NetGuard Collector Verification\"","echo \"==========================================\"","echo \"\"","","DB=\"/home/jarvis/NetGuard/network.db\"","","echo \"→ Checking database tables...\"","echo \"\"","","# Get all collector tables","TABLES=$(sqlite3 $DB \"SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE '%_template'\" 2>/dev/null)","","if [ -z \"$TABLES\" ]; then","    echo \"✗ No tables found in database!\"","    echo \"  Database may be new or collectors haven't run yet.\"","    exit 1","fi","","# Check each collector type","COLLECTORS=(\"p0f\" \"tshark\" \"tcpdump\" \"ngrep\" \"httpry\" \"argus\" \"netsniff\" \"iftop\" \"nethogs\" \"suricata\")","","for collector in \"${COLLECTORS[@]}\"; do","    echo \"Checking $collector collector...\"","    ","    # Count tables for this collector","    TABLE_COUNT=$(echo \"$TABLES\" | grep -c \"^${collector}_\" || echo \"0\")","    ","    if [ $TABLE_COUNT -gt 0 ]; then","        echo \"  ✓ Found $TABLE_COUNT table(s)\"","        ","        # Get latest table","        LATEST_TABLE=$(echo \"$TABLES\" | grep \"^${collector}_\" | sort -r | head -1)","        ","        if [ ! -z \"$LATEST_TABLE\" ]; then","            # Count records in latest table","            RECORD_COUNT=$(sqlite3 $DB \"SELECT COUNT(*) FROM $LATEST_TABLE\" 2>/dev/null || echo \"0\")","            echo \"  ✓ Latest table: $LATEST_TABLE ($RECORD_COUNT records)\"","            ","            # Show last 3 records","            if [ $RECORD_COUNT -gt 0 ]; then","                echo \"  ✓ Collector is WORKING - collecting data!\"","            else","                echo \"  ⚠ Table exists but has no data yet\"","            fi","        fi","    else","        echo \"  ✗ No tables found - collector may not be running\"","    fi","    echo \"\"","done","","echo \"==========================================\"","echo \"  Quick Database Statistics\"","echo \"==========================================\"","echo \"\"","","# Total tables","TOTAL_TABLES=$(echo \"$TABLES\" | wc -l)","echo \"Total tables: $TOTAL_TABLES\"","","# Total records across all tables","echo \"\"","echo \"Records per collector:\"","for collector in \"${COLLECTORS[@]}\"; do","    TOTAL=0","    for table in $(echo \"$TABLES\" | grep \"^${collector}_\"); do","        COUNT=$(sqlite3 $DB \"SELECT COUNT(*) FROM $table\" 2>/dev/null || echo \"0\")","        TOTAL=$((TOTAL + COUNT))","    done","    if [ $TOTAL -gt 0 ]; then","        echo \"  $collector: $TOTAL records\"","    fi","done","","echo \"\"","echo \"==========================================\"","",""],"tokenizedAddedLines":[1000000,1000001,1000002,1000003,1000002,1000004,1000001,1000005,1000001,1000006,1000004,1000001,1000007,1000008,1000001,1000009,1000010,1000011,1000012,1000013,1000001,1000014,1000015,1000001,1000016,1000017,1000018,1000019,1000020,1000018,1000021,1000022,1000023,1000024,1000025,1000023,1000026,1000027,1000028,1000029,1000030,1000031,1000032,1000033,1000034,1000035,1000036,1000037,1000038,1000039,1000040,1000041,1000042,1000001,1000002,1000043,1000002,1000004,1000001,1000044,1000045,1000046,1000001,1000047,1000004,1000048,1000016,1000049,1000050,1000051,1000052,1000053,1000054,1000055,1000040,1000042,1000001,1000004,1000002,1000001,1000001]}],"gitInfo":{"noRepoFound":true},"kind":"KIND_ADDED"}