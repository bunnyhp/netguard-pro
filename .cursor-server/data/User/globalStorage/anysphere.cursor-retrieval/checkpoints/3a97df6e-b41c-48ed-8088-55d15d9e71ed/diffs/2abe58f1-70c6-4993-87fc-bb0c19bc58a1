{"fsPath":"\\home\\jarvis\\NetGuard\\FIX_AI_SYSTEM_COMPLETE.sh","fileUuid":"2abe58f1-70c6-4993-87fc-bb0c19bc58a1","fileSizeBytes":3190,"numLines":92,"diffChanges":[{"originalStartLineNumberOneIndexed":1,"originalEndLineNumberExclusiveOneIndexed":1,"modifiedStartLineNumberOneIndexed":1,"modifiedEndLineNumberExclusiveOneIndexed":93,"addedLines":["#!/bin/bash","","echo \"==========================================\"","echo \"NetGuard Pro - Complete AI System Fix\"","echo \"==========================================\"","","echo \"\"","echo \"üîç Step 1: Checking AI Aggregator Status...\"","sudo systemctl status ai-5min-aggregator.timer --no-pager | grep \"Active:\"","sudo systemctl status ai-5min-aggregator.service --no-pager | grep \"Active:\"","","echo \"\"","echo \"üîß Step 2: Installing AI Aggregator Services...\"","sudo cp /home/jarvis/NetGuard/services/ai-5min-aggregator.service /etc/systemd/system/","sudo cp /home/jarvis/NetGuard/services/ai-5min-aggregator.timer /etc/systemd/system/","sudo systemctl daemon-reload","sudo systemctl enable ai-5min-aggregator.timer","sudo systemctl enable ai-5min-aggregator.service","sudo systemctl start ai-5min-aggregator.timer","","echo \"\"","echo \"üìä Step 3: Checking AI Analysis Data...\"","echo \"Total AI analyses in database:\"","sqlite3 /home/jarvis/NetGuard/network.db \"SELECT COUNT(*) FROM ai_analysis;\"","","echo \"Latest AI analysis:\"","sqlite3 /home/jarvis/NetGuard/network.db \"SELECT timestamp, threat_level, network_health_score FROM ai_analysis ORDER BY timestamp DESC LIMIT 1;\"","","echo \"\"","echo \"üîÑ Step 4: Restarting Flask with Updated APIs...\"","sudo pkill -f \"python3.*app.py\" 2>/dev/null || true","sleep 3","","cd /home/jarvis/NetGuard/web","nohup python3 app.py > /tmp/flask.log 2>&1 &","sleep 5","","echo \"\"","echo \"‚úÖ Step 5: Final Status Check...\"","if pgrep -f \"python3.*app.py\" > /dev/null; then","    echo \"‚úÖ Flask Dashboard: RUNNING\"","else","    echo \"‚ùå Flask Dashboard: FAILED\"","fi","","if sudo systemctl is-active ai-5min-aggregator.timer > /dev/null; then","    echo \"‚úÖ AI Aggregator Timer: RUNNING\"","else","    echo \"‚ùå AI Aggregator Timer: STOPPED\"","fi","","echo \"\"","echo \"üéØ Step 6: Testing AI Dashboard APIs...\"","sleep 2","","# Test AI dashboard API","response=$(curl -s -o /dev/null -w \"%{http_code}\" http://localhost:8080/ai-dashboard/api/stats)","if [ \"$response\" = \"200\" ]; then","    echo \"‚úÖ AI Dashboard API: WORKING (HTTP $response)\"","else","    echo \"‚ùå AI Dashboard API: FAILED (HTTP $response)\"","fi","","# Test network devices API","response=$(curl -s -o /dev/null -w \"%{http_code}\" http://localhost:8080/ai-dashboard/api/network-devices)","if [ \"$response\" = \"200\" ]; then","    echo \"‚úÖ Network Devices API: WORKING (HTTP $response)\"","else","    echo \"‚ùå Network Devices API: FAILED (HTTP $response)\"","fi","","echo \"\"","echo \"üìã Summary:\"","echo \"‚Ä¢ AI Aggregator: Collects data from all 10 tools + Suricata every 5 minutes\"","echo \"‚Ä¢ AI Analysis: Sends comprehensive data to Gemini AI for threat analysis\"","echo \"‚Ä¢ AI Dashboard: Now uses real-time APIs instead of static data\"","echo \"‚Ä¢ Network Devices: Uses separate API endpoint with real device data\"","echo \"\"","echo \"üåê Access Points:\"","echo \"‚Ä¢ Main Dashboard: http://localhost:8080\"","echo \"‚Ä¢ AI Dashboard: http://localhost:8080/ai-dashboard\"","echo \"‚Ä¢ System Health: http://localhost:8080/system-status\"","echo \"‚Ä¢ IoT Devices: http://localhost:8080/iot-devices\"","echo \"\"","echo \"üîÑ The AI system will now:\"","echo \"1. Collect data from all monitoring tools every 5 minutes\"","echo \"2. Send comprehensive analysis to AI for threat detection\"","echo \"3. Store results in database\"","echo \"4. Display real-time data on AI dashboard\"","echo \"\"","echo \"‚ú® AI System Fix Complete!\"",""],"tokenizedAddedLines":[1000000,1000001,1000002,1000003,1000002,1000001,1000004,1000005,1000006,1000007,1000001,1000004,1000008,1000009,1000010,1000011,1000012,1000013,1000014,1000001,1000004,1000015,1000016,1000017,1000001,1000018,1000019,1000001,1000004,1000020,1000021,1000022,1000001,1000023,1000024,1000025,1000001,1000004,1000026,1000027,1000028,1000029,1000030,1000031,1000001,1000032,1000033,1000029,1000034,1000031,1000001,1000004,1000035,1000036,1000001,1000037,1000038,1000039,1000040,1000029,1000041,1000031,1000001,1000042,1000043,1000039,1000044,1000029,1000045,1000031,1000001,1000004,1000046,1000047,1000048,1000049,1000050,1000004,1000051,1000052,1000053,1000054,1000055,1000004,1000056,1000057,1000058,1000059,1000060,1000004,1000061,1000001]}],"gitInfo":{"noRepoFound":true},"kind":"KIND_ADDED"}