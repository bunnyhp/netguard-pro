{"fsPath":"\\home\\jarvis\\NetGuard\\web\\app.py","fileUuid":"aaa2a052-1f5e-4152-8cf1-df29c17e16f5","fileSizeBytes":10748,"numLines":329,"diffChanges":[{"originalStartLineNumberOneIndexed":240,"originalEndLineNumberExclusiveOneIndexed":240,"modifiedStartLineNumberOneIndexed":240,"modifiedEndLineNumberExclusiveOneIndexed":244,"addedLines":["    # Optimize: Get counts in a single query per tool instead of per table","    conn = get_db_connection()","    cursor = conn.cursor()","    "],"tokenizedAddedLines":[1000204,22,23,60]},{"originalStartLineNumberOneIndexed":243,"originalEndLineNumberExclusiveOneIndexed":245,"modifiedStartLineNumberOneIndexed":247,"modifiedEndLineNumberExclusiveOneIndexed":268,"addedLines":["        ","        # Get total records efficiently by querying all tables in one go","        total_records = 0","        if tables:","            # Use UNION ALL to count all tables in single query (much faster)","            try:","                # For tables with many entries, just sample first few tables","                sample_tables = tables[:10] if len(tables) > 10 else tables","                if sample_tables:","                    union_query = \" UNION ALL \".join([f\"SELECT COUNT(*) as cnt FROM {t}\" for t in sample_tables])","                    cursor.execute(union_query)","                    total_records = sum(row[0] for row in cursor.fetchall())","                    # If we sampled, estimate total","                    if len(tables) > 10:","                        total_records = int(total_records * (len(tables) / 10))","            except:","                total_records = 0","        ","        tool['total_records'] = total_records","    ","    conn.close()"],"tokenizedAddedLines":[47,1000205,1000206,1000207,1000208,1000209,1000210,1000211,1000212,1000213,1000214,1000215,1000216,1000217,1000218,1000219,1000220,47,1000221,60,26]}],"gitInfo":{"noRepoFound":true},"kind":"KIND_MODIFIED"}